---
layout: post
title: Two Types in SpecFlow - ScenarioContext and FeatureContext
date: 2011-03-26T21:04:00.001Z
author: Marcus Hammarberg
tags:
  - BDD
  - .NET
  - SpecFlow
modified_time: 2013-04-07T18:31:58.395Z
blogger_id: tag:blogger.com,1999:blog-36533086.post-6352021831868808402
blogger_orig_url: https://www.marcusoft.net/2011/03/two-types-in-specflow-scenariocontext.html
---

Recently, I had the chance to explore more advanced error handling with [SpecFlow](http://www.specflow.org/) and delved into the ScenarioContext and FeatureContext objects. These components offer some powerful capabilities that are worth understanding. In this post, Iâ€™ll take a closer look at both and offer some tips on how to utilize them effectively in your SpecFlow projects.

### ScenarioContext

Most of us have encountered the ScenarioContext in the code generated by SpecFlow when a step definition is missing:

```csharp
[Binding]
public class StepDefinitions
{
    [Then(@"I don't have this step definition in place yet")]
    public void ThenIDonTHaveThisStepDefinitionInPlaceYet()
    {
        ScenarioContext.Current.Pending();
    }
}
```

However, ScenarioContext provides several other useful features:

#### ScenarioContext.Pending

The `Pending` method is well-known for marking steps as pending when a step definition isnâ€™t implemented. You can also use it directly if needed. [Hereâ€™s a demo scenario for this](https://github.com/marcusoftnet/ProgressiveNetDemos/tree/master/Specs/031ScenarioContext).

#### ScenarioContext.Current

`ScenarioContext.Current` offers a `Dictionary` for storing values between steps, making it easier to manage state within step definitions. Use type-safe extension methods from the `TechTalk.SpecFlow.Assist` namespace to handle these values safely.

Darren Cauthon has a [video tutorial on this](http://www.youtube.com/watch?v=IGvxMPX55vE) and further documentation on [SpecFlowâ€™s wiki](https://github.com/techtalk/SpecFlow/wiki/ScenarioContext). Hereâ€™s an example of its usage:

#### ScenarioContext.ScenarioInfo

This property provides access to information about the current scenario, such as its title and tags. It can also be used to handle errors by accessing `ScenarioContext.Current.TestError`, which holds the exception that occurred. [Hereâ€™s a simple error handling example](http://mvccontrib.codeplex.com/) using this feature.

#### ScenarioContext.Current.CurrentScenarioBlock

This property reveals the current step type (Given, When, Then), which can be useful in some cases, although its immediate use may not be apparent.

### FeatureContext

`FeatureContext` operates at the feature level rather than the scenario level. Hereâ€™s how it compares:

#### FeatureContext.Current

Similar to `ScenarioContext.Current`, this property also provides a `Dictionary` for storing values, but it persists throughout the entire feature execution. [Check out the code for FeatureContext scenarios here](https://github.com/marcusoftnet/ProgressiveNetDemos/tree/master/Specs/032FeatureContext).

#### FeatureContext.FeatureInfo

`FeatureContext.FeatureInfo` offers more detailed information about the feature, including its metadata and binding culture.

### Conclusion â€“ Whatâ€™s It Good For?

Understanding these contexts allows for improved logging, tracing, and error handling in your SpecFlow tests. Combining this knowledge with [hooks](https://www.marcusoft.net/2010/12/using-tags-in-specflow-features.html) can enhance your testing capabilities.

I hope you found this information useful. I certainly learned a lot while exploring these features! ðŸ˜Š

[Check out the code examples here](https://github.com/marcusoftnet/ProgressiveNetDemos/).

Happy coding!
