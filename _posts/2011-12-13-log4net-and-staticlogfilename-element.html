---
layout: post
title: Log4Net, RollingFile named by Date and the staticLogFileName setting
date: '2011-12-13T13:29:00.001+01:00'
author: Marcus Hammarberg
tags:
- Tools
- .NET
- Life of a consultant
modified_time: '2011-12-13T13:29:42.279+01:00'
blogger_id: tag:blogger.com,1999:blog-36533086.post-3333381899174569140
blogger_orig_url: http://www.marcusoft.net/2011/12/log4net-and-staticlogfilename-element.html
---

<p>We have been chasing some strange logging bugs for a while in my current project. We are using <a href="http://logging.apache.org/log4net/" target="_blank">log4net</a> to do our logging and it works fine ... until a couple of weeks ago. Some logging didn't occur, in another case we didn't get new files...</p> <a name='more'></a> <p> <p>The fix is, very simple, but quite surprising and I thought I'll share something on what we did to fix it. <p>We are using a <a href="http://logging.apache.org/log4net/release/sdk/log4net.Appender.RollingFileAppender.html" target="_blank">RollingFileAppender</a> and common strategy for how to handle the log files; we're creating a new file for each new date. In order to achieve this we have set the following configuration:</p> <div class="csharpcode"><pre><span class="lnum">   1:  </span>  <span class="kwrd">&lt;</span><span class="html">appender</span> <span class="attr">name</span><span class="kwrd">="RollingLogFileAppender"</span> <span class="attr">type</span><span class="kwrd">="log4net.Appender.RollingFileAppender"</span><span class="kwrd">&gt;</span></pre><pre><span class="lnum">   2:  </span>     <span class="kwrd">&lt;</span><span class="html">file</span> <span class="attr">value</span><span class="kwrd">="{a path here}"</span> <span class="kwrd">/&gt;</span></pre><pre><span class="lnum">   3:  </span>     <span class="kwrd">&lt;</span><span class="html">appendToFile</span> <span class="attr">value</span><span class="kwrd">="true"</span> <span class="kwrd">/&gt;</span></pre><pre><span class="lnum">   4:  </span>     <span class="kwrd">&lt;</span><span class="html">rollingStyle</span> <span class="attr">value</span><span class="kwrd">="Date"</span> <span class="kwrd">/&gt;</span></pre><pre><span class="lnum">   5:  </span>     <span class="kwrd">&lt;</span><span class="html">datePattern</span> <span class="attr">value</span><span class="kwrd">="yyyyMMdd"</span> <span class="kwrd">/&gt;</span></pre><pre><span class="lnum">   6:  </span>     <span class="kwrd">&lt;</span><span class="html">layout</span> <span class="attr">type</span><span class="kwrd">="log4net.Layout.PatternLayout"</span><span class="kwrd">&gt;</span></pre><pre><span class="lnum">   7:  </span>       <span class="kwrd">&lt;</span><span class="html">conversionPattern</span> <span class="attr">value</span><span class="kwrd">="%date [%thread] %-5level %logger - %message%newline"</span> <span class="kwrd">/&gt;</span></pre><pre><span class="lnum">   8:  </span>     <span class="kwrd">&lt;/</span><span class="html">layout</span><span class="kwrd">&gt;</span></pre><pre><span class="lnum">   9:  </span>     <span class="kwrd">&lt;</span><span class="html">filter</span> <span class="attr">type</span><span class="kwrd">="log4net.Filter.LevelRangeFilter"</span><span class="kwrd">&gt;</span></pre><pre><span class="lnum">  10:  </span>       <span class="kwrd">&lt;</span><span class="html">levelMin</span> <span class="attr">value</span><span class="kwrd">="INFO"</span> <span class="kwrd">/&gt;</span></pre><pre><span class="lnum">  11:  </span>     <span class="kwrd">&lt;/</span><span class="html">filter</span><span class="kwrd">&gt;</span></pre><pre><span class="lnum">  12:  </span>   <span class="kwrd">&lt;/</span><span class="html">appender</span><span class="kwrd">&gt;</span></pre></div><br /><style type="text/css">.csharpcode, .csharpcode pre<br />{<br />	font-size: small;<br />	color: black;<br />	font-family: consolas, "Courier New", courier, monospace;<br />	background-color: #ffffff;<br />	/*white-space: pre;*/<br />}<br />.csharpcode pre { margin: 0em; }<br />.csharpcode .rem { color: #008000; }<br />.csharpcode .kwrd { color: #0000ff; }<br />.csharpcode .str { color: #006080; }<br />.csharpcode .op { color: #0000c0; }<br />.csharpcode .preproc { color: #cc6633; }<br />.csharpcode .asp { background-color: #ffff00; }<br />.csharpcode .html { color: #800000; }<br />.csharpcode .attr { color: #ff0000; }<br />.csharpcode .alt <br />{<br />	background-color: #f4f4f4;<br />	width: 100%;<br />	margin: 0em;<br />}<br />.csharpcode .lnum { color: #606060; }<br /></style><br /><br /><style type="text/css">.csharpcode, .csharpcode pre<br />{<br />	font-size: small;<br />	color: black;<br />	font-family: consolas, "Courier New", courier, monospace;<br />	background-color: #ffffff;<br />	/*white-space: pre;*/<br />}<br />.csharpcode pre { margin: 0em; }<br />.csharpcode .rem { color: #008000; }<br />.csharpcode .kwrd { color: #0000ff; }<br />.csharpcode .str { color: #006080; }<br />.csharpcode .op { color: #0000c0; }<br />.csharpcode .preproc { color: #cc6633; }<br />.csharpcode .asp { background-color: #ffff00; }<br />.csharpcode .html { color: #800000; }<br />.csharpcode .attr { color: #ff0000; }<br />.csharpcode .alt <br />{<br />	background-color: #f4f4f4;<br />	width: 100%;<br />	margin: 0em;<br />}<br />.csharpcode .lnum { color: #606060; }<br /></style><br /><br /><p>OK – nothing strange here really. And actually it worked fine for a long time. But all of a sudden we have ran into the problems I described above. </p><br /><p>The solution is simply to add the “staticLogFileName” element to the configuration above, setting the value to false;</p><br /><div class="csharpcode"><pre><span class="lnum">   1:  </span><span class="kwrd">&lt;</span><span class="html">staticLogFileName</span> <span class="attr">value</span><span class="kwrd">="false"</span> <span class="kwrd">/&gt;</span></pre></div><br /><p>And with that it started to work again. I found some questions around this on <a href="http://stackoverflow.com/questions/533804/append-current-date-to-log-file-with-log4net" target="_blank">StackOverflow</a> that was related but not exactly this. </p><br /><p>So if you name your RollingFiles logs with log4net with Dates – be sure to include the staticLogFileName = false setting. </p>  