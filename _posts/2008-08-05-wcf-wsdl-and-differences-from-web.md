---
layout: post
title: WCF, WSDL and differences from web services
date: 2008-08-05T08:46:00.007Z
author: Marcus Hammarberg
tags:
  - .NET - SOA - WCF
modified_time: 2009-01-12T06:57:15.401Z
blogger_id: tag:blogger.com,1999:blog-36533086.post-8135171371212210138
blogger_orig_url: http://www.marcusoft.net/2008/08/wcf-wsdl-and-differences-from-web.html
---

I'm back after a four week vacation (oh yeah - us Swedes really has
things going for us). More about the vacation later.
First thing to learn this "season" is that the
[WSDL](http://en.wikipedia.org/wiki/WSDL_(disambiguation)) generated by
[WCF (Windows Communication
Foundation)](http://msdn.microsoft.com/en-us/netframework/aa663324.aspx?PHPSESSID=0fbb7c61)
services differs from the one generated with ASMX web services.

The main difference is that the WSDL is generated with some kind of
virtual links. That is; parts of the WSDL-file is retrieved using a
different URL. For example:
schemaLocation="http://localhost:3236/Bokforing.svc?xsd=xsd0

This seems to be working fine in Visual Studio 2008 (and hopefully in
2005 also), since they are capable of navigating such references. But
there are problems when you want to send the WSDL-file to someone as an
attachment, or in other environment that can't navigate such links.

Fortunally [Christian Weyer](http://blogs.thinktecture.com/cweyer) [has
a
suggestion](http://blogs.thinktecture.com/cweyer/archive/2007/05/10/414840.aspx)
on how to solve this. There are also some other very useful stuff in
there on how to use namespace correctly in the attributes of WCF.

Since I am forced to use VB.NET I translated the code using this
[excellent
tool](http://labs.developerfusion.co.uk/convert/csharp-to-vb.aspx) found
at [Developer Fusion](http://www.developerfusion.co.uk/)

It is quite tricky but can all be done with base-classes so that not
every developer in the team needs to worry about it...

Two gotchas appeared for me;

1.  The @ServiceHost Factory is a bit strange since is doesn't show up
    in intellisense. It works quite fine though. Read more about it
    [here](http://hyperthink.net/blog/the-servicehost-directive/), and
    [here](http://msdn.microsoft.com/en-us/library/aa967286.aspx).
2.  The loop found in the private method
    RemoveXsdImports was quite tricky to translate into VB.NET since its
    using a kind of looping that not is supported by VB.NET. Also the
    [Developer
    Fusion](http://labs.developerfusion.co.uk/convert/csharp-to-vb.aspx)
    tool didn't translate it correct.
    Here is the code:

   Private Sub RemoveXsdImports(ByVal schema As XmlSchema)
    Dim i As Integer = 0
    While i \<\>
