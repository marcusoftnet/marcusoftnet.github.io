---
layout: post
title: 'Marcus Node Bits: Package.json is a mighty tool'
date: '2014-02-05T14:00:00.000+01:00'
author: Marcus Hammarberg
tags:
- MobProgramming
- Javascript
- Tools
modified_time: '2014-06-02T10:56:52.527+02:00'
blogger_id: tag:blogger.com,1999:blog-36533086.post-6766940189243715152
blogger_orig_url: http://www.marcusoft.net/2014/02/mnb-packagejson.html
---

<div dir="ltr" style="text-align: left;" trbidi="on">I'm writing down some of the things I've picked up when I started to learn about&nbsp;<a href="http://nodejs.org/" target="_blank">Node</a>,&nbsp;<a href="http://expressjs.com/" target="_blank">Express</a>&nbsp;and&nbsp;<a href="http://www.mongodb.org/" target="_blank">Mongo</a>. Here are all the post in the series:<br /><ul><li><a href="http://www.marcusoft.net/2014/02/mnb-terminal.html" target="_blank">Doing stuff in the terminal is not scary at all</a></li><li><a href="http://www.marcusoft.net/2014/02/mnb-npm.html" target="_blank">npm is not only for getting packages</a></li><li>Package.json is a mighty tool - this post</li><li><a href="http://www.marcusoft.net/2014/02/mnb-git.html" target="_blank">Git is not that hard, but I need to refresh my knowledge</a></li><li><a href="http://www.marcusoft.net/2014/02/mnb-callbacks.html" target="_blank">Callback function is cool stuff, and I even know how to write them</a></li><li><span style="color: #0000ee; text-decoration: underline;"><a href="http://www.marcusoft.net/2014/02/mnb-mocha.html" target="_blank">mocha is cool both as framework and test runner</a></span></li><li><a href="http://www.marcusoft.net/2014/02/mnb-should.html" target="_blank">Should is a nice way to do asserts</a>&nbsp;</li><li><a href="http://www.marcusoft.net/2014/02/mnb-monk.html" target="_blank">monk is an easy way to access mongo</a></li><li><a href="http://www.marcusoft.net/2014/02/mnb-express.html" target="_blank">Express is best without generators</a></li><li><a href="http://www.marcusoft.net/2014/02/mnb-supertest.html" target="_blank">supertest is a nice way to test an api</a></li></ul>This post is about the package.json file that is more than first meets the eye.<br /><a name='more'></a>All <a href="http://nodejs.org/" target="_blank">node.js</a> projects with any self-respect has a package.json. All <a href="https://npmjs.org/" target="_blank">npm-modules</a> must have one. It's a manifest file that holds various meta-data around the project. The file is, as the extension is revealing, just a JSON-file and hence easy to create in any text editor.<br /><br />Some of the basic things that the file contains are:<br /><ul style="text-align: left;"><li><b>name</b> - the name of the project (or package in the case your building a nom-package).</li><li><b>version</b> - well the version of the project</li><li><b>description</b> - since js-project <i>must</i>&nbsp;be named something that won't reveal it's content we need a description to tell people what the project is about. Btw <a href="https://github.com/deckchair" target="_blank">deckchair.js </a>is my favourite so far. Longing for noun.js, but it's still out for grabs as it seems...</li><li><b>author</b> - your name and contact information</li></ul>Node.js itself only understands name and version btw. The rest is meta-data that <a href="https://npmjs.org/" target="_blank">npm</a> (node package manager) is using.<br /><br />Other attributes I often end up using are:<br />- <b>dependencies</b> - this list the other packages (and their version) that your project is using.<br />- <b>scripts</b>&nbsp;- here you can create small build commands that npm can execute for you. The <a href="http://www.marcusoft.net/2014/02/mnb-npm.html" target="_blank">next part of this series is about that.</a><br /><br />This is a typical package.json for my projects (please note the update below after some excellent comments):<br /><script src="https://gist.github.com/marcusoftnet/8763052.js"></script>When I create a new project, I often create the package.json first of all. I fill out the things I know, and that's often the better part of the file, actually.<br /><ul style="text-align: left;"><li><span style="font-family: Courier New, Courier, monospace;">sublime</span> <span style="font-family: Courier New, Courier, monospace;">package.json</span> - create the file and open it with <a href="http://www.sublimetext.com/" target="_blank">Sublime</a>.</li><li>copy in some template data, like <a href="https://gist.github.com/marcusoftnet/8763052" target="_blank">this one for example</a></li><li>fill out the <span style="font-family: Courier New, Courier, monospace;">name, description, version</span> (0.0.1) nodes of the package.json</li><li>create the <span style="font-family: Courier New, Courier, monospace;">scripts</span> node and add scripts for starting the app.js file and test, with my <a href="http://www.marcusoft.net/2014/02/mnb-mocha.html" target="_blank">mocha switches.</a></li><li>create the <span style="font-family: Courier New, Courier, monospace;">dependencies</span> node and add the things that I will be using for this project. Typically</li><ul><li>express - my web framework of choice</li><li>monk - if I'm going to have a db</li><li>mocha - my testing framework</li><li>should - nice assertions</li><li>and maybe something else</li></ul><li>Save the package.json and go to the terminal and go <span style="font-family: Courier New, Courier, monospace;">npm install</span>. This will read the package.json and download and install all the dependencies into your node_modules-folder.</li></ul>If I'm adding new dependencies I typically do that by adding them to package.json and rerun "npm install". You can do<br /><blockquote class="tr_bq"><span style="font-family: Courier New, Courier, monospace;">npm install [package name] --save</span>&nbsp;</blockquote>which will update the package.json for you, but I don't do that.<br /><br />So the package.json is a manifest describing your project, a package manager specification that helps you update the dependencies and build script where you can define your own commands, in one.<br /><br />Here's an excellent interactive guide to the <a href="http://package.json.nodejitsu.com/">package.json</a>. If you like it static... you wouldn't do JavaScript, now would you. Any case here's an <a href="https://npmjs.org/doc/json.html" target="_blank">static page describing the package.json</a> file in an great way.<br /><br />One final thing (as they said)... did you see that "startLocal"-node under the scripts-node in my package.json file above? It turns out that npm only understands a couple of scripts by default (test, start etc.) but if you want something else you can add them under the scripts node too, making your <a href="http://www.devthought.com/2012/02/17/npm-tricks/" target="_blank">package.json even more powerful</a>. You have to start these scripts like this:<br />        <blockquote class="tr_bq"><span style="font-family: Courier New, Courier, monospace;">npm run-script startLocal</span>&nbsp;</blockquote><br />UPDATED:<br />From mr <a href="https://twitter.com/Ullmark" target="_blank">Ullmark</a> I got some great tips on how to improve my knowledge. They are in the comments below, but I'll mention them here too:<br /><br /><ul><li><span style="font-family: Courier New, Courier, monospace;">npm init</span> - is a interactive tool, that helps you build your package.json file. So you don't need a template to tweak but can let the tool work for you. Really nice!</li><li>There's a package.json node called devDependencies, for all the things you need in development. These are testing-, assertion- and mocking-frameworks for example. It's a good thing not to mix it up with the production dependencies for clarity and since a much smaller foot print on your production environment. <a href="http://blog.nodejitsu.com/package-dependencies-done-right/" target="_blank">Read more here</a>.</li><li>Finally, my way to set up the test-command in the package.json required all the people that wanted to use the <span style="font-family: Courier New, Courier, monospace;">npm test</span> command to have mocha installed globally (<span style="font-family: Courier New, Courier, monospace;">npm install mocha -g</span>). Not everyone wants that. Build servers for example... So I've updated it to a better version that uses the mocha I have in my project local node_modules folder</li></ul></div>